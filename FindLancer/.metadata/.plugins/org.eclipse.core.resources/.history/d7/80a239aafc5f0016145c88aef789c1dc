<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
<script  src="js/jquery.js"></script> 

<script type="text/javascript">
	$(document).ready(function(){
		$("#cat").change(function(){
			selecionandoCombo(this,'subcat');
		});
		
		function selecionandoCombo(combo1,combo2){
			combo2= document.getElementById(combo2);
			limparCombo(combo2);
			if(combo1.options[combo1.selectedIndex].value!= ""){
				combo2.disabled=true; 
				$.ajax({
					url:'ajaxcontroller',
					type:'get',
					datatype:'json',
					data:{valor:combo1.options[combo1.selectedIndex].value},
					success:function(resultado){
						var myObject = eval('('+ resultado + ')');
						metodoCombo(myObject,combo2);
						combo1.disabled=false;
						combo2.disabled=false;
					}
				});
			}
		}
		
		function limparCombo(combo){
			while(combo.length>0){
				combo.remove(combo.length-1);
			} 
		}
		
		function metodoCombo(json,combo){
			combo.options[0]= new Option('Selecione uma subcategoria','');
			for(var i=0;i<json.length;i++){
				combo.options[combo.length] = new Option(json[i]);
			}
		}
		
		
	});
</script>

</head>
<body>
	<select  name="categorias" id="cat" title="Categorias">
		<option>Selecione uma categoria</option>
		<option value="1">Programadosres</option>
		<option value="2">Fotografos</option>
	</select>
	
	<select  name="idCat" id="subcat">
		<option>Selecione uma subcategoria</option>
	</select>
	
</body>
</html>