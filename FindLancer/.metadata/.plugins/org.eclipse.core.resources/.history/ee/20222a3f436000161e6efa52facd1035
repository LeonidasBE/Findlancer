package br.com.findlancer.sql;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;
 
import br.com.findlancer.entidades.Subcategorias;

public class SubcategoriasDAO {
	
	//Variavel de conexao
	Connection conexaoDB= Conexao.conectar();
	
	public ArrayList<Subcategorias> popularSubcaategorias(int fkCat){
		ArrayList<Subcategorias> listaSub = null;
		try {
			//Select para capturar valores da tabela
			String sql ="select * from subcategorias where fkCategoria=?";
			
			//try para realizar a conexao e executar a query
			try {
				 //Preparando o statement
				PreparedStatement stmt = Conexao.conectar().prepareStatement(sql);
				//Passando os parametros para query
				stmt.setInt(1, fkCat);
				
				//Executando query e armazenado seu resultado 
				ResultSet rs = stmt.executeQuery();
				
				//Atribuindo tipo ao listaSub
				listaSub = new 	ArrayList<Subcategorias>();
				
				//While para captura de valores
				while(rs.next()){
					Subcategorias subcategorias = new Subcategorias();
					subcategorias.setIdSub(rs.getInt(1));
					subcategorias.setDescricao(rs.getString(2));
					subcategorias.setDescricao(rs.getString(2));
				}
				System.out.println("Pos statement");
			} catch (SQLException e) {
				System.out.println("erro sql");
			}
			
			System.out.println("Query subcategorias ok.");
			
		} catch (SQLException e) {
			System.out.println("Query subcategorias erro.");

		}
		
		return listaSubategorias;
	}
}

